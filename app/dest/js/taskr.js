$(function(){$("input:checkbox").each(function(){"true"==localStorage.getItem("checked")&&$(this).prop("checked","true")}),$("input:checkbox").click(function(){val=$(this).prop("checked"),console.log($(this).prop("checked")),val&&localStorage.setItem("checked",val)})}),function(e){var t={storageEnabled:"undefined"!=typeof Storage,getElementStorageKey:function(e){return e.data("storage-name")?"elements-"+e.data("storage-name"):e.attr("id")?"elements-id-"+e.attr("id"):null},getElementValue:function(e){return e.is(":radio, :checkbox")?e.is(":checked")?"true":"false":e.is("input, textarea, select")?e.val():void 0},storeElementState:function(e){if(this.storageEnabled){var t=this.getElementStorageKey(e);if(!t)return console.log("Cannot store element state:"),void console.log(e);value=this.getElementValue(e),window.localStorage[t]=value}},loadElementState:function(t){if(this.storageEnabled){if(!t.data("storage-noload")){var a=this.getElementStorageKey(t);if(!a)return console.log("Cannot load element state:"),void console.log(t);var o=this.getElementValue(t),n=localStorage[a];n&&n!=o&&(t.is(":checkbox, :radio")?("true"==n?t.attr("checked",!0):t.removeAttr("checked"),e.mobile&&t.checkboxradio&&t.checkboxradio("refresh")):t.is("input, textarea, select")&&t.val(n),t.trigger("change"))}t.data("storage-loaded",!0)}}};e.fn.loadState=function(){e.each(e(this),function(){t.loadElementState(e(this))})},e.fn.saveState=function(){e.each(e(this),function(){t.saveElementState(e(this))})},e(function(){var a=e(".store-state").filter("input, textarea, select");a.change(function(){e(this).data("storage-loaded")&&(t.storeElementState(e(this)),a.filter(":checkbox, :radio").each(function(){t.storeElementState(e(this))}))}),a.each(function(){t.loadElementState(e(this))})})}(jQuery);